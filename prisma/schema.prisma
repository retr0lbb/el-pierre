
generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Category{
  id Int @id @default(autoincrement())
  title String @unique
  Product Product[]
}
/* 
  Just for products
*/

model Product{
  id String @id @default(uuid())
  name String
  description String
  basePrice Decimal @map("base_price")
  
  categoryId Int?
  category Category? @relation(fields: [categoryId], references: [id])

  
  @@map("products")
  ProductVariant ProductVariant[]
}

model ProductVariant{
  id String @id @default(uuid())
  size String
  qtdStock Int @map("qtd_stock")
  product Product @relation(fields: [productId], references: [id])
  productId String


  @@map("product_variant")
}


enum Role {
  BASIC
  ADMIN
}

model UserAccount{
  id String @id @default(uuid())
  role Role @default(BASIC)

  fullName String @map("full_name")
  email String @unique
  password String 

  createdAt DateTime @default(now())
  updatedAt DateTime?

  isEmailVerified Boolean @map("is_email_verified")
  @@map("user_account")
  Session Session[]
}


model Session{
  id String @id @default(uuid())
  token String

  user UserAccount @relation(fields: [userId], references: [id])
  userId String

  mfaSecret String?
  expirationDate DateTime @map("expiration_date")
  hasExpired Boolean @map("has_expired")
  createdAt DateTime @default(now())
}

